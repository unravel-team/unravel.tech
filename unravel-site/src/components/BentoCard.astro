---
interface Props {
  class?: string;
  span?: '1' | '2' | '3' | '4' | '6' | '8' | '9' | '12';
  variant?: 'default' | 'featured' | 'gradient' | 'outlined';
  padding?: 'none' | 'sm' | 'md' | 'lg';
  interactive?: boolean;
  href?: string;
}

const { 
  class: className = '',
  span = '3',
  variant = 'default',
  padding = 'md',
  interactive = false,
  href
} = Astro.props;

const spanClasses = {
  '1': 'bento-span-1',
  '2': 'bento-span-2',
  '3': 'bento-span-3',
  '4': 'bento-span-4',
  '6': 'bento-span-6',
  '8': 'bento-span-8',
  '9': 'bento-span-9',
  '12': 'bento-span-12'
};

const variantClasses = {
  default: 'bento-variant-default',
  featured: 'bento-variant-featured',
  gradient: 'bento-variant-gradient',
  outlined: 'bento-variant-outlined'
};

const paddingClasses = {
  none: 'bento-padding-none',
  sm: 'bento-padding-sm',
  md: 'bento-padding-md',
  lg: 'bento-padding-lg'
};

const interactiveClass = interactive ? 'bento-interactive' : '';
const Component = href ? 'a' : 'div';
---

<Component 
  href={href}
  class={`bento-card ${spanClasses[span]} ${variantClasses[variant]} ${paddingClasses[padding]} ${interactiveClass} ${className}`}
>
  <slot />
</Component>

<style>
  .bento-card {
    background: var(--color-bg-white);
    border-radius: var(--radius-lg);
    border: var(--border-width) solid var(--color-border);
    padding: var(--spacing-xl);
    transition: all var(--transition-base);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* Link cards */
  a.bento-card {
    text-decoration: none;
    color: inherit;
  }

  /* Column Spans */
  .bento-span-1 { grid-column: span 1; }
  .bento-span-2 { grid-column: span 2; }
  .bento-span-3 { grid-column: span 3; }
  .bento-span-4 { grid-column: span 4; }
  .bento-span-6 { grid-column: span 6; }
  .bento-span-8 { grid-column: span 8; }
  .bento-span-9 { grid-column: span 9; }
  .bento-span-12 { grid-column: span 12; }

  /* Padding Variants */
  .bento-padding-none { padding: 0; }
  .bento-padding-sm { padding: var(--spacing-lg); }
  .bento-padding-md { padding: var(--spacing-xl); }
  .bento-padding-lg { padding: 3rem; }

  /* Variant Styles */
  .bento-variant-default {
    background: var(--color-bg-white);
  }

  .bento-variant-featured {
    background: var(--color-green-100);
    border-color: var(--unravel-green);
    border-width: 2px;
  }

  .bento-variant-gradient {
    background: var(--color-bg-white);
    position: relative;
    overflow: hidden;
  }

  .bento-variant-gradient::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, 
      rgba(111, 191, 63, 0.1) 0%, 
      rgba(14, 159, 188, 0.1) 100%
    );
    pointer-events: none;
    z-index: 0;
  }

  .bento-variant-gradient > * {
    position: relative;
    z-index: 1;
  }

  .bento-variant-outlined {
    background: transparent;
    border-color: var(--unravel-blue);
  }

  /* Interactive State and Hover Effects */
  .bento-interactive {
    cursor: pointer;
  }

  /* Standard Hover - Blue Border */
  .bento-variant-default:hover,
  .bento-interactive:hover {
    border-color: var(--unravel-blue);
    transform: translateY(-2px);
    box-shadow: var(--shadow-hover);
  }

  /* Featured Hover */
  .bento-variant-featured:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }

  /* Gradient Hover */
  .bento-variant-gradient:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }

  .bento-variant-gradient:hover::before {
    background: linear-gradient(135deg, 
      rgba(111, 191, 63, 0.15) 0%, 
      rgba(14, 159, 188, 0.15) 100%
    );
  }

  .bento-interactive:active {
    transform: translateY(-1px);
  }

  /* Mobile: All cards full width */
  @media (max-width: 640px) {
    .bento-card {
      grid-column: span 1 !important;
      padding: var(--spacing-lg);
    }

    .bento-padding-lg {
      padding: var(--spacing-xl);
    }
  }

  /* Tablet: Adjust larger spans */
  @media (min-width: 641px) and (max-width: 1024px) {
    .bento-span-12 { grid-column: span 8; }
    .bento-span-9 { grid-column: span 8; }
    .bento-span-8 { grid-column: span 8; }
    .bento-span-6 { grid-column: span 4; }
    .bento-span-4 { grid-column: span 4; }
    .bento-span-3 { grid-column: span 2; }
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .bento-card {
      transition: none;
    }

    .bento-interactive:hover,
    .bento-variant-default:hover {
      transform: none;
    }
  }
</style>
